name: Stale Issues and PRs

on:
  schedule:
    # Run daily at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale Issues and PRs
    runs-on: ubuntu-latest
    
    steps:
      - name: Mark stale issues and pull requests
        uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          
          # Issues
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had 
            recent activity. It will be closed if no further activity occurs within 
            the next 7 days. Thank you for your contributions!
          close-issue-message: |
            This issue was automatically closed due to inactivity. If you believe 
            this issue is still relevant, please reopen it or create a new issue.
          days-before-issue-stale: 60
          days-before-issue-close: 7
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,security,bug'
          
          # Pull Requests
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has 
            not had recent activity. It will be closed if no further activity occurs 
            within the next 14 days. Thank you for your contributions!
          close-pr-message: |
            This pull request was automatically closed due to inactivity. If you'd 
            like to continue working on this, please reopen it or create a new PR.
          days-before-pr-stale: 30
          days-before-pr-close: 14
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security,work-in-progress'
          
          # General settings
          operations-per-run: 30
          remove-stale-when-updated: true
